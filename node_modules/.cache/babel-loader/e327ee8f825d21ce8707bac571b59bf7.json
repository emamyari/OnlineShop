{"ast":null,"code":"import _classCallCheck from \"H:\\\\OnlineShop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"H:\\\\OnlineShop\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nvar MockUtils = /*#__PURE__*/function () {\n  function MockUtils() {\n    _classCallCheck(this, MockUtils);\n  }\n  _createClass(MockUtils, [{\n    key: \"baseFilter\",\n    value:\n    /**\r\n     * Filtration with sorting\r\n     * First do Sort then filter\r\n     *\r\n     * @param _entities: any[]\r\n     * @param _queryParams: QueryParamsModel\r\n     * @param _filtrationFields: string[]\r\n     */\n    function baseFilter(_entities, _queryParams) {\n      var _filtrationFields = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n      // Filtration\n      var entitiesResult = this.searchInArray(_entities, _queryParams.filter, _filtrationFields);\n\n      // Sorting\n      // start\n      if (_queryParams.sortField) {\n        entitiesResult = this.sortArray(entitiesResult, _queryParams.sortField, _queryParams.sortOrder);\n      }\n      // end\n\n      // Paginator\n      // start\n      var pageNumber = _queryParams.pageNumber - 1;\n      var totalCount = entitiesResult.length;\n      var initialPos = pageNumber * _queryParams.pageSize;\n      entitiesResult = entitiesResult.slice(initialPos, initialPos + _queryParams.pageSize);\n      // end\n\n      var queryResults = {\n        entities: entitiesResult,\n        totalCount: totalCount,\n        errorMessage: \"\"\n      };\n      return queryResults;\n    }\n\n    /**\r\n     * Sort array by field name and order-type\r\n     * @param _incomingArray: any[]\r\n     * @param _sortField: string\r\n     * @param _sortOrder: string\r\n     */\n  }, {\n    key: \"sortArray\",\n    value: function sortArray(_incomingArray) {\n      var _sortField = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n      var _sortOrder = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"asc\";\n      if (!_sortField) {\n        return _incomingArray;\n      }\n      var result = [];\n      result = _incomingArray.sort(function (a, b) {\n        if (a[_sortField] < b[_sortField]) {\n          return _sortOrder === \"asc\" ? -1 : 1;\n        }\n        if (a[_sortField] > b[_sortField]) {\n          return _sortOrder === \"asc\" ? 1 : -1;\n        }\n        return 0;\n      });\n      return result;\n    }\n\n    /**\r\n     * Filter array by some fields\r\n     *\r\n     * @param _incomingArray: any[]\r\n     * @param _queryObj: any\r\n     * @param _filtrationFields: string[]\r\n     */\n  }, {\n    key: \"searchInArray\",\n    value: function searchInArray(_incomingArray, _queryObj) {\n      var _filtrationFields = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n      var result = [];\n      var resultBuffer = [];\n      var indexes = [];\n      var firstIndexes = [];\n      var doSearch = false;\n      _filtrationFields.forEach(function (item) {\n        if (item in _queryObj) {\n          _incomingArray.forEach(function (element, index) {\n            if (element[item] === _queryObj[item]) {\n              firstIndexes.push(index);\n            }\n          });\n          firstIndexes.forEach(function (element) {\n            resultBuffer.push(_incomingArray[element]);\n          });\n          _incomingArray = resultBuffer.slice(0);\n          resultBuffer = [].slice(0);\n          firstIndexes = [].slice(0);\n        }\n      });\n      Object.keys(_queryObj).forEach(function (key) {\n        var searchText = _queryObj[key].toString().trim().toLowerCase();\n        if (key && !_filtrationFields.some(function (e) {\n          return e === key;\n        }) && searchText) {\n          doSearch = true;\n          try {\n            _incomingArray.forEach(function (element, index) {\n              if (element[key] || element[key] === 0 && searchText === \"0\") {\n                var _val = element[key].toString().trim().toLowerCase();\n                if (_val.indexOf(searchText) > -1 && indexes.indexOf(index) === -1) {\n                  indexes.push(index);\n                }\n              }\n            });\n          } catch (ex) {\n            console.log(ex, key, searchText);\n          }\n        }\n      });\n      if (!doSearch) {\n        return _incomingArray;\n      }\n      indexes.forEach(function (re) {\n        result.push(_incomingArray[re]);\n      });\n      return result;\n    }\n  }]);\n  return MockUtils;\n}();\nexport { MockUtils as default };","map":{"version":3,"names":["MockUtils","_classCallCheck","_createClass","key","value","baseFilter","_entities","_queryParams","_filtrationFields","arguments","length","undefined","entitiesResult","searchInArray","filter","sortField","sortArray","sortOrder","pageNumber","totalCount","initialPos","pageSize","slice","queryResults","entities","errorMessage","_incomingArray","_sortField","_sortOrder","result","sort","a","b","_queryObj","resultBuffer","indexes","firstIndexes","doSearch","forEach","item","element","index","push","Object","keys","searchText","toString","trim","toLowerCase","some","e","_val","indexOf","ex","console","log","re","default"],"sources":["H:/OnlineShop/src/app/modules/ECommerce/__mocks__/mock.utils.js"],"sourcesContent":["export default class MockUtils {\r\n  /**\r\n   * Filtration with sorting\r\n   * First do Sort then filter\r\n   *\r\n   * @param _entities: any[]\r\n   * @param _queryParams: QueryParamsModel\r\n   * @param _filtrationFields: string[]\r\n   */\r\n  baseFilter(_entities, _queryParams, _filtrationFields = []) {\r\n    // Filtration\r\n    let entitiesResult = this.searchInArray(\r\n      _entities,\r\n      _queryParams.filter,\r\n      _filtrationFields\r\n    );\r\n\r\n    // Sorting\r\n    // start\r\n    if (_queryParams.sortField) {\r\n      entitiesResult = this.sortArray(\r\n        entitiesResult,\r\n        _queryParams.sortField,\r\n        _queryParams.sortOrder\r\n      );\r\n    }\r\n    // end\r\n\r\n    // Paginator\r\n    // start\r\n    const pageNumber = _queryParams.pageNumber - 1;\r\n    const totalCount = entitiesResult.length;\r\n    const initialPos = pageNumber * _queryParams.pageSize;\r\n    entitiesResult = entitiesResult.slice(\r\n      initialPos,\r\n      initialPos + _queryParams.pageSize\r\n    );\r\n    // end\r\n\r\n    const queryResults = {\r\n      entities: entitiesResult,\r\n      totalCount: totalCount,\r\n      errorMessage: \"\"\r\n    };\r\n    return queryResults;\r\n  }\r\n\r\n  /**\r\n   * Sort array by field name and order-type\r\n   * @param _incomingArray: any[]\r\n   * @param _sortField: string\r\n   * @param _sortOrder: string\r\n   */\r\n  sortArray(_incomingArray, _sortField = \"\", _sortOrder = \"asc\") {\r\n    if (!_sortField) {\r\n      return _incomingArray;\r\n    }\r\n\r\n    let result = [];\r\n    result = _incomingArray.sort((a, b) => {\r\n      if (a[_sortField] < b[_sortField]) {\r\n        return _sortOrder === \"asc\" ? -1 : 1;\r\n      }\r\n\r\n      if (a[_sortField] > b[_sortField]) {\r\n        return _sortOrder === \"asc\" ? 1 : -1;\r\n      }\r\n\r\n      return 0;\r\n    });\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Filter array by some fields\r\n   *\r\n   * @param _incomingArray: any[]\r\n   * @param _queryObj: any\r\n   * @param _filtrationFields: string[]\r\n   */\r\n  searchInArray(_incomingArray, _queryObj, _filtrationFields = []) {\r\n    const result = [];\r\n    let resultBuffer = [];\r\n    const indexes = [];\r\n    let firstIndexes = [];\r\n    let doSearch = false;\r\n\r\n    _filtrationFields.forEach(item => {\r\n      if (item in _queryObj) {\r\n        _incomingArray.forEach((element, index) => {\r\n          if (element[item] === _queryObj[item]) {\r\n            firstIndexes.push(index);\r\n          }\r\n        });\r\n        firstIndexes.forEach(element => {\r\n          resultBuffer.push(_incomingArray[element]);\r\n        });\r\n        _incomingArray = resultBuffer.slice(0);\r\n        resultBuffer = [].slice(0);\r\n        firstIndexes = [].slice(0);\r\n      }\r\n    });\r\n\r\n    Object.keys(_queryObj).forEach(key => {\r\n      const searchText = _queryObj[key]\r\n        .toString()\r\n        .trim()\r\n        .toLowerCase();\r\n      if (key && !_filtrationFields.some(e => e === key) && searchText) {\r\n        doSearch = true;\r\n        try {\r\n          _incomingArray.forEach((element, index) => {\r\n            if (element[key] || (element[key] === 0 && searchText === \"0\")) {\r\n              const _val = element[key]\r\n                .toString()\r\n                .trim()\r\n                .toLowerCase();\r\n              if (\r\n                _val.indexOf(searchText) > -1 &&\r\n                indexes.indexOf(index) === -1\r\n              ) {\r\n                indexes.push(index);\r\n              }\r\n            }\r\n          });\r\n        } catch (ex) {\r\n          console.log(ex, key, searchText);\r\n        }\r\n      }\r\n    });\r\n\r\n    if (!doSearch) {\r\n      return _incomingArray;\r\n    }\r\n\r\n    indexes.forEach(re => {\r\n      result.push(_incomingArray[re]);\r\n    });\r\n\r\n    return result;\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}